import{d as T,r as m,o as I,c as r,a as t,b as p,w,v as D,u as s,i as F,F as N,e as $,t as h,f as i}from"./index-CIW7kBmI.js";class b{constructor(){}static async get(n){return await(await fetch(n)).json()}static async post(n,e){await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}static async del(n){await fetch(n,{method:"DELETE"})}static async patch(n,e){await fetch(n,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}}const j={class:"d-flex justify-content-center align-items-center vh-100"},B={class:"card p-5"},S={class:"mb-3"},O={class:"table table-bordered my-3"},V=["disabled","onClick"],A=["disabled","onClick"],H=T({__name:"Fetch",setup(y){let n=m([]),e=m(""),u=m(null),o=m(!1),c="http://localhost:3000/usuarios";I(()=>{b.get(c).then(a=>{n.value=a,console.log(a)})});function f(){b.get(c).then(a=>{n.value=a})}function g(){let a={data:{nombre:e.value}};if(e.value===""){alert("El campo no puede estar vacío");return}b.post(c,a).then(()=>{f()}),e.value=""}function k(a){let l=n.value[a].id;l!==void 0?b.del(`${c}/${l}`).then(()=>{f()}):console.error("Error: El ID del item es undefined")}function C(a){e.value=n.value[a].data.nombre,u.value=a,o.value=!0}function E(){if(u.value!==null){let a=n.value[u.value].id;a!==void 0?b.patch(`${c}/${a}`,{data:{nombre:e.value}}).then(()=>{f()}):console.error("Error: El ID del item es undefined")}o.value=!1,u.value=null,e.value=""}function _(){o.value=!1,e.value=""}return(a,l)=>(i(),r("div",j,[t("div",null,[l[3]||(l[3]=t("h1",{class:"text-center"},"Bienvenido a la página Fetch",-1)),t("div",B,[t("div",S,[l[1]||(l[1]=t("label",{for:"inputTexto",class:"form-label"},"Ingrese un nombre",-1)),w(t("input",{"onUpdate:modelValue":l[0]||(l[0]=d=>F(e)?e.value=d:e=d),type:"text",class:"form-control",id:"inputTexto"},null,512),[[D,s(e)]])]),s(o)?p("",!0):(i(),r("button",{key:0,onClick:g,class:"btn btn-primary"},"Enviar")),s(o)?(i(),r("button",{key:1,onClick:E,class:"btn btn-secondary"},"Guardar")):p("",!0),s(o)?(i(),r("button",{key:2,onClick:_,class:"btn btn-danger my-1"},"Cancelar")):p("",!0)]),t("table",O,[l[2]||(l[2]=t("thead",null,[t("tr",null,[t("th",{scope:"col"},"Nombre"),t("th",{scope:"col"},"Funciones")])],-1)),t("tbody",null,[(i(!0),r(N,null,$(s(n),(d,v)=>(i(),r("tr",{key:v},[t("td",null,h(d.data.nombre)+" "+h(d.id),1),t("td",null,[t("button",{disabled:s(o),onClick:x=>C(v),class:"btn btn-success me-2"},"E",8,V),t("button",{disabled:s(o),onClick:x=>k(v),class:"btn btn-danger"},"X",8,A)])]))),128))])])])]))}});export{H as default};
