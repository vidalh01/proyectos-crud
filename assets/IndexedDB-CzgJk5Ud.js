var p=Object.defineProperty;var x=(n,e,t)=>e in n?p(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var d=(n,e,t)=>x(n,typeof e!="symbol"?e+"":e,t);import{_ as N}from"./mainComp.vue_vue_type_script_setup_true_lang-DkBq7PDA.js";import{d as E,r as m,o as _,c as v,u,a as S}from"./index-kw-C2qQh.js";class w{constructor(e,t){d(this,"dbName");d(this,"storeName");this.dbName=e,this.storeName=t}initDB(){return new Promise((e,t)=>{const o=indexedDB.open(this.dbName,1);o.onupgradeneeded=i=>{const a=i.target.result;a.objectStoreNames.contains(this.storeName)||a.createObjectStore(this.storeName,{keyPath:"id",autoIncrement:!0})},o.onsuccess=()=>e(o.result),o.onerror=()=>t(o.error)})}async ftStore(){return(await this.initDB()).transaction(this.storeName,"readwrite").objectStore(this.storeName)}async addDataItem(e){(await this.ftStore()).add(e)}async remDataItem(e){(await this.ftStore()).delete(e)}async updDataItem(e){const t=await this.ftStore(),o=JSON.parse(JSON.stringify(e));t.put(o)}async getData(){const t=(await this.ftStore()).getAll();return new Promise(o=>{t.onsuccess=()=>o(t.result)})}}const j=E({__name:"IndexedDB",setup(n){let e="IndexedDB",t=m([]),o=m({nombre:"",id:-1}),i=m(!1);const a=new w("MiBaseDeDatos","MiAlmacen");_(()=>{a.getData().then(r=>{t.value=r}).catch(r=>{console.error("Error al obtener los datos:",r)})});function l(){a.getData().then(r=>{t.value=r}).catch(r=>{console.error("Error al obtener los datos:",r)})}function f(r){console.log(r);let s={nombre:r};if(r===""){alert("El campo no puede estar vacÃ­o");return}a.addDataItem(s).then(()=>{l()}).catch(c=>{console.error("Error al agregar el item:",c)})}function h(r,s){let c=t.value[s].id;c!==void 0?a.remDataItem(c).then(()=>{l()}).catch(g=>{console.error("Error al eliminar el item:",g)}):console.error("Error: El ID del item es undefined")}function I(r,s){o.value=r,i.value=!0}function D(r){let s=o.value.id;a.updDataItem({nombre:r,id:s}).then(()=>{l()}).catch(c=>{console.error("Error al editar el item:",c)}),i.value=!1}function b(){i.value=!1}return(r,s)=>(S(),v(N,{title:u(e),onEditarItem:I,onAgregarItem:f,onGuardarItem:D,"mode-edit":u(i),"x-arr":u(t),"borrar-item":h,onCancerEdit:b},null,8,["title","mode-edit","x-arr"]))}});export{j as default};
