var E=Object.defineProperty;var _=(i,t,e)=>t in i?E(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var h=(i,t,e)=>_(i,typeof t!="symbol"?t+"":t,e);import{d as w,r as b,o as B,c as u,a,b as p,w as C,v as S,u as d,i as j,F as M,e as q,t as D,f as m}from"./index-RFc8bzEk.js";class F{constructor(t,e){h(this,"dbName");h(this,"storeName");this.dbName=t,this.storeName=e}initDB(){return new Promise((t,e)=>{const o=indexedDB.open(this.dbName,1);o.onupgradeneeded=s=>{const l=s.target.result;l.objectStoreNames.contains(this.storeName)||l.createObjectStore(this.storeName,{keyPath:"id",autoIncrement:!0})},o.onsuccess=()=>t(o.result),o.onerror=()=>e(o.error)})}async ftStore(){return(await this.initDB()).transaction(this.storeName,"readwrite").objectStore(this.storeName)}async addDataItem(t){(await this.ftStore()).add(t)}async remDataItem(t){(await this.ftStore()).delete(t)}async updDataItem(t){const e=await this.ftStore(),o=JSON.parse(JSON.stringify(t));e.put(o)}async getData(){const e=(await this.ftStore()).getAll();return new Promise(o=>{e.onsuccess=()=>o(e.result)})}}const O={class:"d-flex justify-content-center align-items-center vh-100"},P={class:"card p-5"},T={class:"mb-3"},V={class:"table table-bordered my-3"},A=["disabled","onClick"],G=["disabled","onClick"],z=w({__name:"IndexedDB",setup(i){let t=b([]),e=b(""),o=b(null),s=b(!1);const l=new F("MiBaseDeDatos","MiAlmacen");B(()=>{l.getData().then(r=>{t.value=r}).catch(r=>{console.error("Error al obtener los datos:",r)})});function f(){l.getData().then(r=>{t.value=r}).catch(r=>{console.error("Error al obtener los datos:",r)})}function g(){let r={nombre:e.value};if(e.value===""){alert("El campo no puede estar vacío");return}l.addDataItem(r).then(()=>{f()}).catch(n=>{console.error("Error al agregar el item:",n)}),e.value=""}function y(r){let n=t.value[r].id;n!==void 0?l.remDataItem(n).then(()=>{f()}).catch(c=>{console.error("Error al eliminar el item:",c)}):console.error("Error: El ID del item es undefined")}function I(r){e.value=t.value[r].nombre,o.value=r,s.value=!0}function N(){if(o.value!==null){let r=t.value[o.value].id;r!==void 0?l.updDataItem({nombre:e.value,id:r}).then(()=>{f()}).catch(n=>{console.error("Error al editar el item:",n)}):console.error("Error: El ID del item es undefined")}s.value=!1,o.value=null,e.value=""}function k(){s.value=!1}return(r,n)=>(m(),u("div",O,[a("div",null,[n[3]||(n[3]=a("h1",{class:"text-center"},"Bienvenido a la página IndexedDB",-1)),a("div",P,[a("div",T,[n[1]||(n[1]=a("label",{for:"inputTexto",class:"form-label"},"Ingrese un nombre",-1)),C(a("input",{"onUpdate:modelValue":n[0]||(n[0]=c=>j(e)?e.value=c:e=c),type:"text",class:"form-control",id:"inputTexto",required:""},null,512),[[S,d(e)]])]),d(s)?p("",!0):(m(),u("button",{key:0,onClick:g,class:"btn btn-primary"},"Enviar")),d(s)?(m(),u("button",{key:1,onClick:N,class:"btn btn-secondary"},"Guardar")):p("",!0),d(s)?(m(),u("button",{key:2,onClick:k,class:"btn btn-danger my-1"},"Cancelar")):p("",!0)]),a("table",V,[n[2]||(n[2]=a("thead",null,[a("tr",null,[a("th",{scope:"col"},"Nombre"),a("th",{scope:"col"},"Funciones")])],-1)),a("tbody",null,[(m(!0),u(M,null,q(d(t),(c,v)=>(m(),u("tr",{key:v},[a("td",null,D(c.nombre)+" "+D(c.id),1),a("td",null,[a("button",{disabled:d(s),onClick:x=>I(v),class:"btn btn-success me-2"},"E",8,A),a("button",{disabled:d(s),onClick:x=>y(v),class:"btn btn-danger"},"X",8,G)])]))),128))])])])]))}});export{z as default};
